<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:f="http://xmlns.jcp.org/jsf/core"
             xmlns:p="http://primefaces.org/ui"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:pe="http://primefaces.org/ui/extensions">

    <ui:composition template="/templates/template.xhtml">

        <ui:define name="bodycontent">
            <h:form id="frm">

                <div class="bodyWrapper">

                    <div class="titel">
                        Toernooi Aanpassen

                        <div class="onderTitel">
                            Kampioenschap: #{clubBeheerBean.kampioenschap.naam}
                        </div>
                    </div>

                    <div class="subTitel gegevensHeader pointer">
                        Gegevens
                        <i class="fa fa-angle-double-down downExpandGegevens"/>
                        <i class="fa fa-angle-double-up upExpandGegevens"/>
                    </div>

                    <div class="ui-grid ui-grid-responsive formGrid gegevensContent">

                        <div class="ui-grid-row formRow">
                            <div class="ui-grid-col-3">
                                <p:outputLabel value="Status:"></p:outputLabel>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:outputLabel
                                        value="#{clubBeheerBean.toernooi.status.toStringSimple()}"></p:outputLabel>
                            </div>
                        </div>

                        <p:spacer height="20"/>

                        <div class="ui-grid-row formRow">
                            <div class="ui-grid-col-3">
                                <p:outputLabel value="Naam*:"></p:outputLabel>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:inputText validatorMessage="Naam is verplicht"
                                             value="#{clubBeheerBean.toernooi.naam}" id="naam">
                                    <f:validateRequired/>
                                    <f:ajax render="msg_naam naam"/>
                                </p:inputText>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:message id="msg_naam" for="naam"></p:message>
                            </div>
                        </div>

                        <div class="ui-grid-row formRow">
                            <div class="ui-grid-col-3">
                                <p:outputLabel value="Datum*:"></p:outputLabel>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:calendar id="datum" value="#{clubBeheerBean.toernooi.datum}" pattern="dd/MM/yyyy"
                                            validatorMessage="Datum is verplicht" readonlyInput="true" required="true"
                                            requiredMessage="Datum is verplicht" navigator="true" locale="nl">
                                    <f:converter converterId="DatumConverter"></f:converter>
                                    <p:ajax event="dateSelect" update=":frm:msg_datum :frm:datum"/>
                                </p:calendar>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:message id="msg_datum" for="datum"></p:message>
                            </div>
                        </div>

                        <div class="ui-grid-row formRow">
                            <div class="ui-grid-col-3">
                                <p:outputLabel value="Startuur*:"></p:outputLabel>
                            </div>
                            <div class="ui-grid-col-3">
                                <pe:timePicker locale="nl" value="#{clubBeheerBean.toernooi.startTijdstip}" id="uur"
                                               required="true" requiredMessage="Startuur is verplicht">
                                    <f:converter converterId="TimeConverter"/>
                                    <p:ajax event="close" update=":frm:uur :frm:msg_uur"/>
                                </pe:timePicker>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:message id="msg_uur" for="uur"></p:message>
                            </div>
                        </div>

                        <p:spacer height="20"/>

                        <div class="ui-grid-row formRow">
                            <div class="ui-grid-col-3">
                                <p:outputLabel value="Aantal wippen:"></p:outputLabel>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:spinner size="5" value="#{clubBeheerBean.toernooi.aantalWippen}" min="0"
                                           max="200"></p:spinner>
                            </div>
                        </div>

                        <div class="ui-grid-row formRow">
                            <div class="ui-grid-col-3">
                                <p:outputLabel value="Aantal ploegen*:"></p:outputLabel>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:spinner id="ploegen" size="5" value="#{clubBeheerBean.toernooi.maximumAantalPloegen}"
                                           validatorMessage="Aantal ploegen moet tussen 2 en 1000 liggen"
                                           requiredMessage="Aantal Ploegen is verplicht" min="0">
                                    <f:validateRequired/>
                                    <f:validateLongRange minimum="2" maximum="1000"/>
                                    <p:ajax event="change" update=":frm:ploegen :frm:msg_ploegen"/>
                                </p:spinner>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:message id="msg_ploegen" for="ploegen"></p:message>
                            </div>
                        </div>

                        <div class="ui-grid-row formRow">
                            <div class="ui-grid-col-3">
                                <p:outputLabel value="Aantal personen per ploeg*:"></p:outputLabel>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:spinner id="ppp" size="5" value="#{clubBeheerBean.toernooi.personenPerPloeg}" min="0"
                                           validatorMessage="Personen per Ploeg moet tussen 1 en 20 liggen"
                                           requiredMessage="Personen per Ploeg is verplicht">
                                    <f:validateRequired/>
                                    <f:validateLongRange minimum="1" maximum="20"/>
                                    <p:ajax event="change" update=":frm:ppp :frm:msg_ppp"/>
                                </p:spinner>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:message id="msg_ppp" for="ppp"></p:message>
                            </div>
                        </div>

                        <p:spacer height="20"/>


                        <div class="ui-grid-row formRow">
                            <div class="ui-grid-col-3">
                                <p:outputLabel value="Met inleg?"></p:outputLabel>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:selectBooleanCheckbox value="#{clubBeheerBean.toernooi.metInleg}">
                                    <p:ajax event="change" update=":frm:in_inleg"/>
                                </p:selectBooleanCheckbox>
                            </div>
                        </div>

                        <div class="ui-grid-row formRow">
                            <div class="ui-grid-col-3">
                                <p:outputLabel value="Inleg per ploeg:"></p:outputLabel>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:spinner id="in_inleg" prefix="€" stepFactor="0.5" min="0" max="1000" size="5"
                                           value="#{clubBeheerBean.toernooi.inlegPerPloeg}"
                                           disabled="#{!clubBeheerBean.toernooi.metInleg}"></p:spinner>
                            </div>
                        </div>

                        <p:spacer height="20"/>


                        <div class="ui-grid-row formRow">
                            <div class="ui-grid-col-3">
                                <p:outputLabel value="Inschrijvingsdeadline:"></p:outputLabel>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:calendar value="#{clubBeheerBean.toernooi.inschrijfDeadline}" pattern="dd/MM/yyyy"
                                            navigator="true" locale="nl" readonlyInput="true">
                                    <f:converter converterId="DatumConverter"></f:converter>
                                </p:calendar>
                            </div>
                        </div>

                        <div class="ui-grid-row formRow">
                            <div class="ui-grid-col-3">
                                <p:outputLabel value="Toernooi omschrijving:"></p:outputLabel>
                            </div>
                            <div class="ui-grid-col-9">
                                <p:inputTextarea cols="50" autoResize="true"
                                                 value="#{clubBeheerBean.toernooi.omschrijving}"></p:inputTextarea>
                            </div>
                        </div>

                        <p:spacer height="20"/>
                    </div>

                    <div class="subTitel cateringHeader pointer">
                        Catering
                        <i class="fa fa-angle-double-down downExpandCatering"/>
                        <i class="fa fa-angle-double-up upExpandCatering"/>
                    </div>

                    <div class="ui-grid ui-grid-responsive formGrid cateringContent">

                        <div class="ui-grid-row formRow">
                            <div class="ui-grid-col-3">
                                <p:outputLabel value="Met maaltijd?"></p:outputLabel>
                            </div>
                            <div class="ui-grid-col-3">
                                <p:selectBooleanCheckbox value="#{clubBeheerBean.toernooi.heeftMaaltijd}">
                                    <p:ajax event="change" update=":frm:pnl_catering"/>
                                </p:selectBooleanCheckbox>
                            </div>
                        </div>

                        <h:panelGroup id="pnl_catering">
                            <div class="ui-grid-row formRow">
                                <div class="ui-grid-col-3">
                                    <p:outputLabel value="Menu's:"></p:outputLabel>
                                </div>
                                <div class="ui-grid-col-9">
                                    <p:outputLabel value="Voor dit toernooi zijn er nog geen menu's"
                                                   rendered="#{clubBeheerBean.toernooi.menuList.size() == 0}"/>

                                    <ui:repeat value="#{clubBeheerBean.toernooi.menuList}" var="menu">

                                        <div class="ui-grid-row formRow">

                                            <div class="ui-grid-col-3">
                                                Naam:
                                            </div>

                                            <div class="ui-grid-col-3">
                                                <p:inputText value="#{menu.naam}"
                                                             disabled="#{!clubBeheerBean.toernooi.heeftMaaltijd}"/>
                                            </div>

                                            <div class="ui-grid-col-3">
                                                Prijs per persoon:
                                            </div>

                                            <div class="ui-grid-col-3">
                                                <p:spinner prefix="€"
                                                           stepFactor="0.5"
                                                           min="0"
                                                           max="1000"
                                                           size="5"
                                                           value="#{menu.prijs}"
                                                           disabled="#{!clubBeheerBean.toernooi.heeftMaaltijd}"/>
                                            </div>

                                        </div>

                                        <div class="ui-grid-row formRow">

                                            <div class="ui-grid-col-3">
                                                Omschrijving:
                                            </div>

                                            <div class="ui-grid-col-9">
                                                <p:inputTextarea value="#{menu.omschrijving}"
                                                                 cols="50"
                                                                 autoResize="true"
                                                                 disabled="#{!clubBeheerBean.toernooi.heeftMaaltijd}"/>
                                            </div>

                                        </div>

                                    </ui:repeat>

                                    <div class="ui-grid-row formRow">
                                        <div class="ui-grid-col-6 right">
                                            <i class="fa fa-plus-square-o plus"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </h:panelGroup>

                    </div>


                    <div class="subTitel inschrijvingenHeader pointer">
                        Inschrijvingen
                        <i class="fa fa-angle-double-down downExpandInschrijvingen"/>
                        <i class="fa fa-angle-double-up upExpandInschrijvingen"/>
                    </div>

                    <p:messages showDetail="true" id="msg"></p:messages>

                    <h:panelGroup id="inschrijvingen">

                        <div class="ui-grid ui-grid-responsive formGrid inschrijvingenContent">
                            <div class="ui-grid-row formRow">
                                <div class="ui-grid-col-6">

                                    <p:outputLabel
                                            value="De inschrijvingen voor dit toernooi zijn vooralsnog gesloten"
                                            rendered="#{!clubBeheerBean.toernooi.status.inschrijvingenOpen}"/>

                                    <p:outputLabel
                                            value="De inschrijvingen voor dit toernooi zijn geopend"
                                            rendered="#{clubBeheerBean.toernooi.status.inschrijvingenOpen}"/>


                                </div>
                                <div class="ui-grid-col-6 right">
                                    <p:commandButton
                                            value="Inschrijvingen Openen"
                                            actionListener="#{clubBeheerBean.openInschrijvingen}"
                                            update="frm:inschrijvingen frm:msg @form frm_dial"
                                            rendered="#{!clubBeheerBean.toernooi.status.inschrijvingenOpen}"
                                            oncomplete="PF('dial_ins').show();">

                                        <p:ajaxStatus onstart="PF('statusDialog').show()"
                                                      onsuccess="PF('statusDialog').hide()"/>

                                    </p:commandButton>

                                    <p:commandButton
                                            value="Inschrijvingen Afsluiten"
                                            update="frm:inschrijvingen frm:msg"
                                            rendered="#{clubBeheerBean.toernooi.status.inschrijvingenOpen}"/>
                                </div>
                            </div>

                            <div class="ui-grid-row formRow">

                                <div class="ui-grid-col-12 right">
                                    <p:commandButton
                                            value="Inschrijvingen Beheren"
                                            action="#{clubBeheerBean.inschrijvingenBeheren}"
                                            rendered="#{clubBeheerBean.toernooi.status.inschrijvingenOpen}"/>
                                </div>

                            </div>
                        </div>

                    </h:panelGroup>

                    <p:spacer height="30"/>

                    <div class="pageButton">
                        <p:commandButton value="Toernooi Verwijderen"></p:commandButton>
                        <p:spacer width="10"/>
                        <p:commandButton value="Toernooi Opslaan"
                                         action="#{clubBeheerBean.opslaanToernooi}"></p:commandButton>
                    </div>

                </div>

            </h:form>

            <p:dialog id="dial" header="Inschrijvingen Geopend" modal="true" widgetVar="dial_ins">
                <h:form id="frm_dial">
                    <div class="ui-grid-responsive formGrid">

                        <div class="ui-grid-row formRow">
                            <h:outputText value="#{clubBeheerBean.inschrijvingenGeopendMessage}" escape="false">
                                <f:converter converterId="NewLineConverter"/>
                            </h:outputText>

                        </div>

                        <div class="ui-grid-row formRow">
                            <p:commandButton value="OK"
                                             onclick="PF('dial_ins').close();"/>
                        </div>

                    </div>
                </h:form>
            </p:dialog>

            <h:outputScript library="js" name="club_toernooi.js"/>

        </ui:define>

    </ui:composition>

</ui:fragment>
